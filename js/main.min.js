"use strict";function formatDateTime(e){return new Date(e).toLocaleString([],{dateStyle:"full",timeStyle:"short"})}function formatDateOnly(e){return new Date(e).toLocaleDateString([],{dateStyle:"long"})}function formatShortDateTime(e){return new Date(e).toLocaleString([],{dateStyle:"short",timeStyle:"short"})}function initDateTimes(){document.querySelectorAll(".postDateTimeDisplay").forEach((e=>{e.textContent=formatDateTime(e.getAttribute("content"))}));document.querySelectorAll(".postTimeOnlyDisplay").forEach((e=>{e.parentNode.removeChild(e)}));document.querySelectorAll(".postDateDisplay").forEach((e=>{e.textContent=formatDateOnly(e.getAttribute("content"))}));document.querySelectorAll(".postShortDateTimeDisplay").forEach((e=>{e.textContent=formatShortDateTime(e.getAttribute("content"))}))}function moveDescription(){const e=document.body.querySelector("meta[name='description']");e&&document.head.appendChild(e)}function initScrollToTopButton(){const e={threshold:0},t=document.getElementById("pixel-to-watch");if("IntersectionObserver"in window){const n=document.getElementById("backToTopBtnContainer");document.getElementById("backToTopBtn");function o(e){e.forEach((e=>{e.intersectionRatio>0&&e.target==t?n.classList.remove("visible"):e.intersectionRatio<=0&&e.target==t&&n.classList.add("visible")}))}new IntersectionObserver(o,e).observe(t)}else document.getElementById("backToTopBtnContainer").classList.add("visible")}function initDisqusRelatedLazyload(){const e=document.getElementById("disqus_thread"),t=document.getElementById("related-posts"),n={rootmargin:"150px 0px",threshold:.01};let o,i,c;function a(e){const t=document.getElementById("disqus_empty"),n=document.createElement("script");e&&(n.onload=console.log("Disqus loaded."),n.src="https://xerblade.disqus.com/embed.js",document.head.appendChild(n),t&&t.remove())}function r(e){const n=document.createElement("script");n.setAttribute("crossorigin","anonymous"),n.setAttribute("integrity",i),n.onload=console.log("Related posts loaded."),n.onerror=()=>{throw function(){const e=document.createElement("div");e.classList.add("card");const n=document.createElement("div");n.classList.add("card-content"),n.appendChild(document.createTextNode("Failed to load "+c+"."));const o=document.createElement("div");o.classList.add("card-action");const i=document.createElement("button");i.classList.add("btn"),i.classList.add("ripple"),i.classList.add("ripple-light"),i.onclick=()=>{r(t)},i.appendChild(document.createTextNode("Retry")),o.appendChild(i),e.appendChild(n),e.appendChild(o),t.appendChild(e)}(),this.remove(),new Error("Failed to load "+this.src)},n.src=o,document.head.appendChild(n)}if(window.location.href.indexOf("/p/")>-1?(o="https://rawcdn.githack.com/XerBlade/xerblade-com-tracker/c2d268800615cdf3485783f44c404dccdc4be832/js/recentposts.min.js",i="sha384-adMTks7SxQUW+nXSUmJnvVOVzIbGsVezPwnAF8GtvHMO2784BUp+tmNHj7XqC6x0",c="recent posts"):(o="https://rawcdn.githack.com/XerBlade/xerblade-com-tracker/2ec133515ec78e8ab1de8f343f9b44ce07b1f30b/js/relatedposts.min.js",i="sha384-fGVhh+QWfZcxf3vwUfS2StWGw910JobU9ZRGK7Usf62ak4MG09TTIBB/VTKWIMPi",c="related posts"),e&&t){let s=window.location.hash;if(s&&(s=s.replace(/#/,"")),"IntersectionObserver"in window&&0!=s.indexOf("comment-")){function d(n){n&&n.forEach((n=>{n.intersectionRatio>0&&n.target==e?(l.unobserve(n.target),a(n.target)):n.intersectionRatio>0&&n.target==t&&(l.unobserve(n.target),r(n.target))}))}const l=new IntersectionObserver(d,n);l.observe(e),l.observe(t)}else r(),a(e)}}function initCommentLink(){const e=document.getElementById("disqus-link");e&&e.addEventListener("click",(e=>{e.preventDefault();document.getElementById("disqus_thread").scrollIntoView(!0)}))}function initShareButton(){if(navigator.share){const e=document.getElementById("native-share-button");e.addEventListener("click",(()=>{const e=document.title;let t=document.location.href;const n=document.querySelector("link[rel=canonical]");null!==n&&(t=n.href);const o=document.querySelector("meta[name='description']"),i=o?o.content:"";navigator.share({title:e,text:i,url:t}).then((()=>{console.log("Successful share")})).catch((e=>{console.error("Error sharing",e)}))})),e.classList.remove("hide");const t=document.querySelector(".share-btns");t&&t.classList.add("hide")}}function initFormValidation(){document.querySelectorAll(".validate").forEach((e=>{e.addEventListener("invalid",(t=>{t.preventDefault(),e.classList.add("invalid"),e.addEventListener("input",(function t(){e.classList.remove("invalid"),e.removeEventListener("input",t)}))}))}))}function initModals(){document.querySelectorAll(".modal-trigger").forEach((e=>{const t=e.dataset.target,n=document.getElementById(t);e.onclick=()=>{n.classList.add("open"),n.querySelector("input[required]").focus();document.querySelector(".modal-overlay").onclick=()=>{n.classList.remove("open"),e.focus()}},e.onkeydown=t=>{"Space"===t.code&&(t.preventDefault(),e.click())},e.href="javascript:void(0)",e.role="button",n.querySelector("form").addEventListener("submit",(()=>{n.classList.remove("open"),e.focus()})),n.querySelector(".modal-close").onclick=()=>{n.classList.remove("open"),e.focus()}}))}function initPaypal(){const e=document.getElementById("donation-card-paypal-reveal"),t=document.getElementById("paypal-link");e&&t&&(t.href="javascript:void(0)",t.role="button",t.onclick=()=>{e.classList.toggle("show-reveal")},t.onkeydown=e=>{"Space"===e.code&&(e.preventDefault(),t.click())})}function init(){initDateTimes(),moveDescription(),initScrollToTopButton(),initDisqusRelatedLazyload(),initCommentLink(),initShareButton(),initFormValidation(),initModals(),initPaypal()}"loading"==document.readyState?window.addEventListener("DOMContentLoaded",init):init();